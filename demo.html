<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Cross-browser gaussian blur demo</title>
    <meta name="description" content="Cross-browser gaussian blur demo" />
    <meta name="author" content="Bruno Le Hyaric (Bu2)" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <style>
      
      html, body{
        margin: 0;
        padding: 0;
        border: 0;

        width: 100%;
        height: 100%;

        overflow: hidden;
      }
      
      img.guilin {
        filter: blur(5px);
        -webkit-filter: blur(5px);
        -moz-filter: blur(5px);
      }

    </style>
    
    <script language="javascript" >

      var screen_width = -1;
      var screen_height = -1;
      var screen_ratio = -1;

      var my_resize = function(img) {
        var img_width = $(img).width();
        var img_height = $(img).height();
        var img_ratio = img_width / img_height;
      
        if(screen_ratio > img_ratio) {
          $(img).width(screen_width);
          $(img).height(screen_width / img_ratio);
          $(img).css('margin-top', (screen_height - $(img).height())/2 + 'px');
        } else {
          $(img).height(screen_height);
          $(img).width(screen_height * img_ratio);
          $(img).css('margin-left', (screen_width - $(img).width())/2 + 'px');
        }
      };

      var initChrome = function() {
        $('#here').replaceWith('<img class="guilin" src="guilin.jpg" />')
      };
      
      var init = function() {

        screen_width = $(document.body).width();
        screen_height = $(document.body).height();
        screen_ratio = screen_width / screen_height;

        initChrome();
      
        my_resize($('img.guilin'));
        $(window).resize( function(event) { document.location.reload(); } );
      };
     
    </script>
  </head>
  <body onload="init();">
    <div id="here">Please enable Javascript</div>
  </body>
</html>
